import json, datetime, requests

from webwhatsapi import WhatsAPIDriver

# Main
# driver = WhatsAPIDriver(loadstyles=True, profile='/home/livelabs01/Development/azbot-webwhatsdriver/sample/profile-zap')
driver = WhatsAPIDriver(loadstyles=True)
print("Waiting for QR")

driver.wait_for_login()
print("Bot started")
start_time = datetime.datetime.now()

phones = [
    {"cpf": "00141700866", "number": "11961791193"},
    {"cpf": "00067921892", "number": "17981032720"},
    {"cpf": "00059219882", "number": "11983181840"},
    {"cpf": "00026098865", "number": "11956124236"},
    {"cpf": "00209787821", "number": "11972710570"},
    {"cpf": "00040588874", "number": "12988507810"},
    {"cpf": "00041439813", "number": "19991215145"},
    {"cpf": "00043289819", "number": "11946660906"},
    {"cpf": "00056620870", "number": "19994303241"},
    {"cpf": "00177616890", "number": "11992320585"},
    {"cpf": "00354987810", "number": "11961199881"},
    {"cpf": "01059976846", "number": "11999303323"},
    {"cpf": "00146804830", "number": "11963410176"},
    {"cpf": "00031913890", "number": "14996903695"},
    {"cpf": "00031688837", "number": "11972641268"},
    {"cpf": "00032072856", "number": "12988377529"},
    {"cpf": "00032303840", "number": "11998712578"},
    {"cpf": "00034129898", "number": "11973321640"},
    {"cpf": "00035751878", "number": "17958928585"},
    {"cpf": "00150775865", "number": "11959113880"},
    {"cpf": "00035185821", "number": "16163633522"},
    {"cpf": "00035684828", "number": "15988353040"},
    {"cpf": "00034907858", "number": "12991154944"},
    {"cpf": "00035366885", "number": "17991502983"},
    {"cpf": "00145128580", "number": "11970232492"},
    {"cpf": "00038163896", "number": "11939502040"},
    {"cpf": "00037640879", "number": "11953042043"},
    {"cpf": "00037624830", "number": "11971978362"},
    {"cpf": "00037323806", "number": "16992022492"},
    {"cpf": "00039032817", "number": "83993866735"},
    {"cpf": "00039165884", "number": "11982217717"},
    {"cpf": "00039014835", "number": "11965578366"},
    {"cpf": "00040896854", "number": "12988551330"},
    {"cpf": "00041153847", "number": "13996322275"},
    {"cpf": "00042299837", "number": "16996232576"},
    {"cpf": "00041443845", "number": "19933848569"},
    {"cpf": "00043119816", "number": "18996904316"},
    {"cpf": "00043284850", "number": "14997247757"},
    {"cpf": "00044089856", "number": "11970875369"},
    {"cpf": "00045629846", "number": "15997614753"},
    {"cpf": "00044976860", "number": "12988611570"},
    {"cpf": "00045447810", "number": "12996326342"},
    {"cpf": "00160975808", "number": "11949926707"},
    {"cpf": "00046559825", "number": "19997489067"},
    {"cpf": "00048245801", "number": "11960337333"},
    {"cpf": "00047393882", "number": "11991493607"},
    {"cpf": "00163196648", "number": "11944665412"},
    {"cpf": "00048535800", "number": "11988595467"},
    {"cpf": "00048795895", "number": "12996652082"},
    {"cpf": "00049982869", "number": "11947084081"},
    {"cpf": "00049605801", "number": "11995655331"},
    {"cpf": "00049768867", "number": "13996662757"},
    {"cpf": "00050966855", "number": "11920213355"},
    {"cpf": "00052682811", "number": "12991976597"},
    {"cpf": "00173760848", "number": "11977351926"},
    {"cpf": "00054450861", "number": "11964039276"},
    {"cpf": "00056998864", "number": "11972002808"},
    {"cpf": "00057707855", "number": "11920973498"},
    {"cpf": "00170722805", "number": "11984515782"},
    {"cpf": "00167531867", "number": "11999954193"},
    {"cpf": "00059113898", "number": "11951908304"},
    {"cpf": "00061357812", "number": "12996091446"},
    {"cpf": "00060507861", "number": "11972055042"},
    {"cpf": "00176062840", "number": "11996404905"},
    {"cpf": "00061932850", "number": "11968374175"},
    {"cpf": "00061276812", "number": "11950492877"},
    {"cpf": "00061536822", "number": "11983992038"},
    {"cpf": "00061495883", "number": "16999750844"},
    {"cpf": "00062312847", "number": "19991234151"},
    {"cpf": "00174274874", "number": "11961815906"},
    {"cpf": "00165118830", "number": "11941241801"},
    {"cpf": "00207996830", "number": "11940719701"},
    {"cpf": "00182465837", "number": "11972917289"},
    {"cpf": "00063094886", "number": "11972684481"},
    {"cpf": "00303890894", "number": "12997673076"},
    {"cpf": "00063245841", "number": "14996136308"},
    {"cpf": "00301950806", "number": "11964092568"},
    {"cpf": "00167106813", "number": "11953071249"},
    {"cpf": "04831339814", "number": "11976641891"},
    {"cpf": "00170314863", "number": "11974332191"},
    {"cpf": "00300108885", "number": "11972217632"},
    {"cpf": "00302146881", "number": "11999877862"},
    {"cpf": "00182576825", "number": "11961957048"},
    {"cpf": "00307846890", "number": "11964670608"},
    {"cpf": "00125831897", "number": "11947225060"},
    {"cpf": "10743262883", "number": "11969915027"},
    {"cpf": "00024749800", "number": "42998286376"},
    {"cpf": "00155374800", "number": "11998518965"},
    {"cpf": "00167325884", "number": "11978089401"},
    {"cpf": "00360276857", "number": "11985760338"},
    {"cpf": "00602317851", "number": "11969446080"},
    {"cpf": "00777801833", "number": "11966611893"},
    {"cpf": "00170897869", "number": "11956743905"},
    {"cpf": "00705121836", "number": "11955890644"},
    {"cpf": "00669168874", "number": "11955461845"},
    {"cpf": "00068193890", "number": "11944669575"},
    {"cpf": "00794370870", "number": "11991294048"},
    {"cpf": "00847262880", "number": "11986200696"},
    {"cpf": "00115004840", "number": "11979845585"},
    {"cpf": "00394757866", "number": "11975354696"},
    {"cpf": "00632075830", "number": "11972105669"},
    {"cpf": "00621377864", "number": "11971683561"},
    {"cpf": "00136811841", "number": "11970912346"},
    {"cpf": "00227219830", "number": "11998785522"},
    {"cpf": "00082854890", "number": "11998222647"},
    {"cpf": "00341617830", "number": "11995932634"},
    {"cpf": "00152586881", "number": "11975475468"},
    {"cpf": "00310435854", "number": "11945578237"},
    {"cpf": "01125756845", "number": "11947445749"},
    {"cpf": "00016442890", "number": "11992559396"},
    {"cpf": "00669835846", "number": "11937651458"},
    {"cpf": "00210344865", "number": "19982636930"},
    {"cpf": "00219728852", "number": "19993310104"},
    {"cpf": "00323245889", "number": "11968003991"},
    {"cpf": "01286067898", "number": "11951562076"},
    {"cpf": "01136424822", "number": "11981113738"},
    {"cpf": "01041146817", "number": "11971454818"},
    {"cpf": "01176861824", "number": "11999830037"},
    {"cpf": "00223519812", "number": "19999962349"},
    {"cpf": "01024867862", "number": "19955153371"},
    {"cpf": "00200218875", "number": "19998477927"},
    {"cpf": "00150175833", "number": "17991518408"},
    {"cpf": "00205181880", "number": "19974143408"},
    {"cpf": "00349250820", "number": "11963220873"},
    {"cpf": "00376201851", "number": "11953845759"},
    {"cpf": "00114318816", "number": "11948150935"},
    {"cpf": "00125020813", "number": "11988846015"},
    {"cpf": "00397151837", "number": "11981759667"},
    {"cpf": "00138065802", "number": "11974213606"},
    {"cpf": "00393765830", "number": "11997052995"},
    {"cpf": "00309920876", "number": "11973404041"},
    {"cpf": "00145350843", "number": "11996211770"},
    {"cpf": "00840534884", "number": "11976303419"},
    {"cpf": "01084177862", "number": "11995557839"},
    {"cpf": "01005101833", "number": "11935549183"},
    {"cpf": "01076834825", "number": "11932550326"},
    {"cpf": "01122930852", "number": "11949333860"},
    {"cpf": "00974119814", "number": "11961834935"},
    {"cpf": "00621685844", "number": "11942547987"},
    {"cpf": "00761965858", "number": "11982312764"},
    {"cpf": "00685574857", "number": "11973262771"},
    {"cpf": "01093238828", "number": "11958733026"},
    {"cpf": "01154431851", "number": "11973799692"},
    {"cpf": "01214643850", "number": "11116976209"},
    {"cpf": "01251052827", "number": "11932577635"},
    {"cpf": "01264645880", "number": "11926018139"},
    {"cpf": "01257947893", "number": "11925078720"},
    {"cpf": "00062857835", "number": "11983340449"},
    {"cpf": "00060985844", "number": "12935224813"},
    {"cpf": "00036767816", "number": "18997375894"},
    {"cpf": "00207211884", "number": "11971282665"},
    {"cpf": "00061785881", "number": "11999584083"},
    {"cpf": "00047568860", "number": "11957070569"},
    {"cpf": "00061774847", "number": "11947263783"},
]

for idx, phone in enumerate(phones):
    is_whatsapp = True if driver.check_number_status(
        f"55{phone.get('number')}@c.us").status == 200 else False

    print(f"Checando numero {idx + 1}/{len(phones)} ({phone.get('cpf')} - {phone.get('number')}) - {str(is_whatsapp)}")

    phone_data = {
        "cpf": phone.get('cpf'),
        "number": phone.get('number'),
        "is_whatsapp": is_whatsapp,
        "origin": "whatsapp-bot"
    }
    requests.post('https://zapconsignado.com.br/api/client-phone', data=json.dumps(
        phone_data))
